<% content_for :body_content_left do %>
  <article id="locations">
    <div id="locations_index_map"></div>

    <ul id="locations">
      <% @locations.each do |location| %>
        <li>
          <%= link_to location.name, refinery.locations_location_path(location) %>
        </li>
      <% end %>
    </ul>
  </article>
<% end %>

<% content_for :javascripts do %>
  <%= javascript_include_tag('http://maps.google.com/maps/api/js?sensor=true') %>
  <%= javascript_include_tag('refinery/locations/vendor/gmaps.js') %>
  <%= javascript_include_tag('refinery/locations/locations_map') %>
  <script type="text/javascript">
    $(document).ready(function(){
      var locations_map = new Application.LocationsMap('#locations_index_map', <%= Refinery::Locations.config.map_center.first %>, <%= Refinery::Locations.config.map_center.last %>);
      locations_map.addLocations(<%= @locations.to_json.html_safe %>);
    });
  </script><% end %>

<%= render '/refinery/content_page' %>


