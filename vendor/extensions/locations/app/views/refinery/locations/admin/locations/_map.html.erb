<div class="wym_skin_refinery page_part">
  <div class="wym_box field">
    <div id="map-picker">

    </div>

    <aside>
      <%= f.inputs do %>
        <%= f.input :latitude %>
        <%= f.input :longitude %>
      <% end %>
    </aside>
  </div>
</div>

<% content_for :stylesheets, stylesheet_link_tag('refinery/locations/map_picker.css') %>
<% content_for :javascripts do %>
  <%= javascript_include_tag('http://maps.google.com/maps/api/js?sensor=true') %>
  <%= javascript_include_tag('refinery/locations/vendor/gmaps.js') %>

  <script>
    $(document).ready(function(){
      var map = new GMaps({
        div: '#map-picker',
        zoom: 16,
        mapType: 'Satellite',
        lat: <%= Refinery::Locations.config.map_center.first %>,
        lng: <%= Refinery::Locations.config.map_center.last %>,
        click: function(e) {
          $('#location_latitude').val(e.latLng.lat());
          $('#location_longitude').val(e.latLng.lng());
        },
      })
    });
  </script>
<% end %>
