- content_for :body_content_left do
  - Refinery::Properties::Property::AVAILABILITY_STATES.each do |status|
    - properties = @properties_by_status[status]  
    - if properties
      %h2= status.titleize
      .properties_list
        - properties.each do |property|
          = render 'preview', :property => property

- content_for :body_content_right do
  #locations_index_map

- content_for :javascripts do
  = javascript_include_tag('http://maps.google.com/maps/api/js?sensor=true')
  = javascript_include_tag('refinery/locations/vendor/gmaps.js')
  = javascript_include_tag('refinery/locations/locations_map')
  :javascript
    $(document).ready(function(){
      var locations_map = new Application.LocationsMap('#locations_index_map', #{Refinery::Locations.config.map_center}, {zoom:15});
      locations_map.addLocations(#{@locations.to_json(:methods => [:description_preview, :preview_image_url, :colour]).html_safe });
    });

.refinerycms-properties
  #property_index
    = render '/refinery/content_page'
